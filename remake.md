# SustainGenie業務邏輯分析與簡化建議

## 當前業務邏輯與功能項目

### 核心功能
1. **圖片分析**
   - 圖片處理與壓縮
   - 使用GPT-4o分析商品特性、狀況和賣點

2. **碳足跡計算**
   - 產品匹配：將商品與產品資料庫匹配
   - 材質分析：分析商品材質組成計算碳足跡
   - 環保效益轉換（樹木吸碳、減少車輛排放）

3. **文案優化**
   - 生成優化商品標題
   - 使用AIDA模型與FAB銷售法生成商品描述
   - 突出環保價值與SDGs目標連結

4. **用戶界面**
   - 商品類型及相應表單
   - 圖片上傳與分析展示
   - 結果展示（標題、描述、碳足跡儀表板）

### 次要功能
5. **RAG向量搜尋**
   - 建立產品向量資料庫
   - 查詢相似產品

6. **資料翻譯**
   - 中文轉英文提高GPT處理能力
   - 使用Google Cloud Translation

7. **網路搜尋**
   - DuckDuckGo商品資訊搜尋
   - 整合搜尋結果到描述

8. **效能監控**
   - 各功能執行時間記錄
   - 提供效能報告

## 建議簡化/省略的功能

1. **翻譯功能 (可省略)**
   - 現代GPT模型對中文理解已足夠好
   - 移除Google Cloud Translation依賴可降低成本
   - 建議：直接使用中文與GPT交互，移除翻譯層

2. **網路搜尋 (可簡化為選配)**
   - 非必要功能，搜尋結果品質難以控制
   - 建議：保留選項但預設關閉，或完全移除

3. **RAG服務架構 (需簡化)**
   - 目前實作為獨立HTTP服務增加複雜度
   - 建議：將RAG整合為內部模組，使用同步調用

4. **雙重碳足跡計算 (可簡化)**
   - 產品匹配和材質分析雙軌制增加複雜度
   - 建議：專注於一種主要方法，另一種作為備用

5. **過細的商品類型設定 (可簡化)**
   - `PRODUCT_TYPE_CONFIG`過於詳細
   - 建議：簡化為更通用的配置，減少特殊案例處理

## 保留並強化的核心功能

1. **圖片分析**：這是核心差異化功能
2. **碳足跡計算**：主要價值主張，但可簡化計算邏輯
3. **文案優化**：主要產出功能
4. **用戶界面**：保持友好的用戶體驗

## 重構優先順序建議

1. **移除翻譯層**：最容易實現的簡化，立即降低複雜度
2. **簡化RAG實作**：從HTTP服務轉為內部模組
3. **精簡碳足跡計算邏輯**：選擇一種主要方法
4. **重新設計資料流**：建立更清晰的資料處理流程
5. **統一錯誤處理**：實作一致的錯誤處理機制

這樣的簡化將顯著降低代碼複雜度，同時保留SustainGenie的核心功能和價值主張。您認為這些建議是否符合您的需求？我可以針對任何特定功能的簡化提供更詳細的實作建議。